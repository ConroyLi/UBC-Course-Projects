\documentclass[12pt]{article} % The document class with options

\usepackage[margin=1in]{geometry}
\usepackage[utf8]{inputenc} 
\geometry{a4paper}
\usepackage{newtxtext,newtxmath}
\usepackage[T1]{fontenc}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{microtype}
\usepackage{graphicx}
\usepackage{listings} % For formatting and highlighting code
\usepackage{color}    % For colors in code highlighting
% chktex-file 8
% chktex-file 12
% chktex-file 13
% chktex-file 18
% chktex-file 26
% chktex-file 34
% chktex-file 39
% chktex-file 41
\begin{document}
\setlength{\parskip}{1em} 
\setlength{\parindent}{0pt}
\newcommand{\vect}[1]{\mathbf{#1}}

\begin{titlepage}  % This starts a title page environment
    \centering    % Center everything on the page

    %--- Add space at the top of the page ---
    \vspace*{2cm}
    
    %--- Title ---
    \normalsize \textbf{MEng Project Log} \\
    \vspace{0.5cm}  % Space between lines
    %\normalsize\textbf{Comparison of Gauss-Newton Method with Marquardt Modification with \\
    % Nelder-Mead Algorithm for Parameter Estimation in Algebraic Models} \\
    \vspace{2cm}  % Space between the title and the author name
    
    %--- Author ---
    \normalsize by\\
    \vspace{1cm}
    \normalsize Jincong Li \\ 
    \vspace{1cm}
    \normalsize M.Eng, The University of British Columbia, 2024
    \vspace{11cm}  % Space between the author and the date
    
    %--- Date ---
    \normalsize 8th May, 2024

    \vfill  % Push the following content to the bottom of the page
    %--- Bottom part of the page ---
    © Jincong Li, 2024
\end{titlepage}
\tableofcontents
\newpage
\section{8th May}
\begin{enumerate}
    \item Applied for the access to ICICS 227
    \item Applied for the access to compute Canada
\end{enumerate}

\section{9th May}
\begin{enumerate}
    \item Installed Gmesh, Paraview and get access to compute canada
    \item Read Eigenfrequency analysis from COSMOL 
    \item Learn how to use Gmesh: geometry part and the mesh part with two case: vertical plane and cylinder
    \item Install the Simflow
\end{enumerate}
\section{10th May}
\subsection{Important Functions}
\begin{enumerate}
    \item simflow : run simflow to solve
    \item mpirun -nx simflowOmpi -npx
    \item simGmshCnvt -msh *.msh :mesh
    \item simPlt -type vtk : post processing
    \item gmsh -3 : convert geo to msh
    \item cd ~(home) . (current) .. (previous)
    \item vi :q :w :q! : quit, write, write\&quit, and quit without saving
    \item cp (source) (destination) :copy
    \item mv (source) (destination) :move
    \item scp :copy from others computer
    \item rm -r (folder)
    \item scp -r ineogi@beluga.computecanada.ca:~/scratch/CavityTutorial .
    \item scp conroyli@beluga.computecanada.ca:~/scratch/CavityTutorial/debug1/*.vtk .
\end{enumerate}
\subsection{Case 1: Lid Driven Cavity}
\begin{enumerate}
    \item 10 time steps with 0.1s
    \item saved in `debug1`'
    \item which simflow :give the location of the first version of simflow
    \item /simflow-Nihar/bin/simflow
    \item vi simflow.config
    \item simPlt -type vtk -min 0 -last 10 in CavityTutorial
\end{enumerate}
    \subsection{Files}
    \begin{enumerate} 
        \item cavity.geo
        \item cavity.msh : save as msh
        \item .crd .cnn .nbc (nodal BC) .srf
        \item cavity.def
        \item eightNodeBrick sixNodeWedge fourNodeTech
        \item simGmshCnvt -msh Case1.msh
\end{enumerate}
\subsection{Multiprocess}
    \begin{enumerate}
        \item InteractiveNode
        \item salloc --ntasks=16 --account=def-rjaiman --time=1:0:0 --mem-per-cpu=4G
        \item squeue
        \item multiple cpu task: simflow.config
        \item mpirun -n 16 ~/simflow-Nihar/bin/simflowOmpi -np 16
    \end{enumerate}

\section{13th May}
\begin{enumerate}
    \item Fix Case1 files -> the problem should be in the mesh file
    \item Check email for the lab access
    \item Run Case2: sucessfully run and the vortec shedding is observed
    \item Run Case3: VIV case with movable cylinder, follow the code project 1 article and try to reproduce the results.
    \item Run Case4: wave-run-up case
\end{enumerate}
\subsection{Steps to Simflow}
\begin{enumerate}
    \item Mesh - Geometry - 3D/2D w 1 layer thick - physical groups - nbc srf - Mesh.MshFileVersion = 2.13;
    \item Def file - geo -> msh - simflowCnvt 
    \item Post processing: \item scp conroyli@beluga.computecanada.ca:/home/conroyli/scratch/Case1-plate/debug1/*.vtk .
    \item Paraview :vtk
    \item MATLAB: Oisd Othd
    \item Restart Simflow: Rst
    \item 
\end{enumerate}
\subsection{Case4: Complie}
\begin{enumerate}
    \item src - solbc.c - change the height.. - save and "make" in src
    \item make clean to clear
    \item make again
    \item def - userdefined 
    \item 
\end{enumerate}
\subsection{Multiphase}
\begin{enumerate}
    \item Allen-Calm (Phase field)
    \item order parameter = $\phi$ from -1 to 1 (air to water)
    \item src-solpro.c 
\end{enumerate}

\section{14th May}
\begin{enumerate}
    \item /scratch/st-jelovica-1/ljc2018/
    \item ljc2018@sockeye.arc.ubc.ca cwl password
    \item 
\end{enumerate}
\subsection{Sockeye}
\begin{enumerate}
    \item make clean
    \item cp ../src-cc/src/y.* .
    \item make
\end{enumerate}
\subsection{Submit job}
\begin{enumerate}
    \item computecanadajob.sh
    \item sbatch
    \item make
\end{enumerate}
\section{15th May}
\begin{enumerate}
    \item Case 4 wave-run up submitted
    \item Case 3 VIV case submitted
\end{enumerate}

\section{16th May}
\begin{enumerate}
    \item Case 3 VIV case with corrected parameters submitted
\end{enumerate}

\section{21th May}
\begin{enumerate}
    \item N/A
\end{enumerate}
\section{22th May}
\subsection{Output}
\begin{enumerate}
    \item oisd --> Integrated Force
    \item othd --> Nodal Time History
    \item 
\end{enumerate}
\subsection{Initialization of multuphase}
\begin{enumerate}
    \item x is the longitutial, z is up and down
    \item solProc.c line  377 3i+2 is the z crd, need + or -1
    \item 
\end{enumerate}
\subsection{Killing waves}
\begin{enumerate}
    \item Method 1: ship at 0.25 L of the domain and l as the ship length, domain: 15-20l and 5l for the very coarse
    \item fine mesh in front, very coarse at the end
    \item Method 2: solTimeInteg
    \item damploc --> start location of damping
    \item 
\end{enumerate}
\subsection{multiple jobs}
\begin{enumerate}
    \item change simMakeInp --> run simMake --> make: complie c++ --> simflow and simflowOmpi
    \item make cleam + copy y files
    \item Wavetank: L=15+5m, H = 6m, W = 8m
    \item 
\end{enumerate}
Task: exaime waves from 0.2-2m 
Jobs: height 0.8m \& 1.6m and wave length 1m \& 2m
\begin{enumerate}
    \item 1: 0.8 \& 1
    \item 2: 0.8 \& 2
    \item 3: 1.6 \& 1
    \item 4: 1.6 \& 2
\end{enumerate}

\section{23th May}
\subsection{Work for DTMB5415}
\begin{enumerate}
    \item Question: wave case not reasonable
    \item Load the DTMP5415 ship model into gmsh
    \item reverse it in the x-direction to have the head of the ship facing -x
    \item scale the model down into 1:24.83 according to the Varhihal's thesis
    \item re-run the testing case2 for the wave in 100 ts and 5 outFre to see if the input wave is functioning
    \item Lpp = 5.72 m x--> -8m and 12m y--> +-10m z--> +-8.49/2m
    \item 4 tests for wave are discard, new test with height = 0.5m and 3 1 3 "test5"
    \item test5 failed --> need to ask Ishan
\end{enumerate}
\section{24th May}
\subsection{Work}
\begin{enumerate}
    \item Question: how is the depth of the water defined in the solBc.c
    \item need to consider the distance between the bottom of the model and the origin point 
    \item free surface to bottom of the ship is 0.248m
    \item need to sizefield the mesh
    \item wave is generated correctly now but to see if the amplitude is correct --> Test6: 2000 time steps 
    \item mesh problem is solved, now need to refine the mesh according to the thesis
    \item orgin of the ship to the lowest point is 0.12m, so the wave should be generated at 0.284m - 0.12m = 0.164m + 2.46m (min z) = 
    \item stp file needed in sockeye system? --> use the msh file generated in Gmsh
    \item how to control the Output? --> timehistory
    \item definition file? ALE and Multiphase together? --> yes, all three together
\end{enumerate}

\section{27th May}
\subsection{Work for DTMB5415}
\begin{enumerate}
    \item makeup the definition file for DTMB 5415 ship simulation
    \item copy from previous def files
    \item solvesquence mode? dynamic or transient
    \item $U_{\inf}$ is computed from Re to be 1.86515, so that the time step is 0.01s.
    \item name of the mesh motion?
    \item all Y to zero?
    \item done modifying the definition file
    \item msh conversion failed --> ask Ishan
\end{enumerate}
\section{28th May}
\subsection{Work for DTMB5415}
\begin{enumerate}
    \item fix the msh and related files
    \item wave height $H_w$ is computed to be LPP*0.056 = 0.32032
    \item wave number ? $k_w$ is $\frac{2\pi}{LPP} = 1.09845$
    \item time period of wave $T_w$ is $\frac{0.629*LPP}{U_{\inf}} = 1.929$
    \item  salloc --nodes=1 --account=st-jelovica-1 --time=1:0:0 --mem-per-cpu=4G
    \item change the type of element on the srf to be threenodetriangle
\end{enumerate}
\section{3rd June}
\subsection{Work for DTMB5415}
\begin{enumerate}
    \item fix the DTMB5415 simulation
    \item need to change the dir of Open MakeFile and change SIMFLOW-HOME to your directory
\end{enumerate}
\subsection{Work for wave}
\begin{enumerate}
    \item wave case test 7 with the src files given by Ishan for 100 timesteps --> the test is success, the input is good
    \item test 8 for longer times to see the damp out, 4000 steps with 200 out --> run again
\end{enumerate}
\subsection{Meeting with Dr.Rajeev}
\begin{enumerate}
    \item next meeting on June 09 for industry
\end{enumerate}
\section{4th June}
\subsection{Work for DTMB5415}
\begin{enumerate}
    \item exaime the result of DTMB test and test 8 and the TDP test.
    \item more info on http://www.simman2008.dk/5415/5415-geometry.html
\end{enumerate}
\subsection{Work for wave}
\begin{enumerate}
    \item run the test 8 again with 4000 steps --> still not working 
    \item simPlt -type vtk -min 0 -last 10
\end{enumerate}
\section{5th June}
\subsection{Work for DTMB5415}
\begin{enumerate}
    \item 
\end{enumerate}
\section{6th June}
\subsection{Work for wave}
\begin{enumerate}
    \item the wave is correct in the wave run up case
    \item so now, run the wave tank case with the same src file for test 9 and change the depth of the water as test 8
    \item 1118420 is the 3m  (test 8) --> 1120985
    \item 1118455 is the test 9 with the same solBc.c files with the wave run up case --> 1120952
\end{enumerate}
\section{7th June}
\subsection{Work for wave}
\begin{enumerate}
    \item test 8 and 9 are both success
    \item now need new tests for 1. wavelength 1 and everything else same --> test1
    \item 2. wave period 1 and everything else same --> test2
    \item 3. wave period 2.5 and everything same --> test3
\end{enumerate}
\section{13th June}
\subsection{Work for structural modes}
\begin{enumerate}
    \item got the Inp files
    \item create the folders
    \item run %./ccx_2.19 solid 
    \item run %./frd2vtk solid 10 frq (10 modes)
    \item comment out solTimeInteg.c line 530 damping codes
    \item 
\end{enumerate}
\subsection{Work for waves}
\begin{enumerate}
\item comment out solTimeINteg.c line 530 damping codes
\end{enumerate}
\section{14th June}
\subsection{Work for DTMB5415}
\begin{enumerate}
    \item test for not moving ship to see if the domain is correct
\end{enumerate}
\section{17th June}
\subsection{Work for DTMB5415}
\begin{enumerate}
    \item test submitted last friday failed, need to check the boundary conditions in the definition file.
    \item change dynamic to transient and reduce the iteration for non-linear calculation --> re-run the test
\end{enumerate}
\section{18th June}
\subsection{Work for DTMB5415}
\begin{enumerate}
    \item examine the test submitted yesterday --> tmr
    \item use exactly the same definition file from the wave Tank case to see the difference --> NmTest3 -->failed
    \item test 4 with my modified definition file --> sim succeed --> problem caused by highFreDampingFac?
\end{enumerate}
\section{19th June}
\subsection{Work for DTMB5415}
\begin{enumerate}
    \item since no error shown in the simflow, need to ask Ishan --> ask Xiaoyu
    \item since the simple waveTank case is success, Xiaoyu suggests to change piece by piece from the waveTank case to the ship case
    \item so here is the procedure:
    \item put the ship into the waveTank case domain run the sim see the result
    \item need test 5 to see the effect of highFreDampingFac --> need to ask xiaoyu
\end{enumerate}
\section{20th June}
\subsection{Work for DTMB5415}
\begin{enumerate}
    \item shift-x tests --> move the entire domain to have the origin located at the inlet surface does not work 
    \item do not use simflowOmpi-DTMB use the same simflow exe as the waveTank case --> test 6 (1316325)
\end{enumerate}
\section{24th June}
\subsection{Work for DTMB5415}
\begin{enumerate}
    \item want to see the effect of changing the domain
    \item reduce y to 4m tests --> reduce-y-test1 sucessed, not failing with simflow-1
    \item with simflow-DTMB --> test2
\end{enumerate}
\section{2nd July}
\subsection{Work for DTMB5415}
\begin{enumerate}
    \item simGmshCnvt -msh *.msh 
    \item /* Hard code for inlet wave run-up */
    \item H-wave = 0.32032 ;          /* Wave height */
    \item D-water = 3.0 ;//2.624 ;         /* Water depth */
    \item T-wave = 1.929;       /* Wave period */
    \item L-wave = 0.9108 ;          /* Wave length */
    \item PI = 3.14159265 ;
    \item G = 9.81 ;
\end{enumerate}
\section{3rd July}
\subsection{Work for DTMB5415}
\begin{enumerate}
    \item sockeye is not avaible currently
    \item working on beluga
    \item modifying files and setting up the sim
\end{enumerate}
\section{4th July}
\subsection{Work for DTMB5415}
\begin{enumerate}
    \item check the sim set up yesterday
    \item DTMB5415 Tank test1 failed
    \item increase y test succeed
    \item 
\end{enumerate}
\section{5th July}
\subsection{Work for DTMB5415}
\begin{enumerate}
    \item check the sim set up yesterday
    \item need to check the moving case 
    \item try DTMB5415 moving (increase y) test2 with inertia and stiffness set to 1 --> pending
    \item 
\end{enumerate}
\section{7th July}
\subsection{Work for DTMB5415}
\begin{enumerate}
    \item refine the mesh near the ship
    \item ask for the ALE definition file from Ishan
    \item why ale is not moving ?
    \item how to track the heave response of the ship? probe on the ship? coordinates?
    \item how to trach the vertical fluid force? 
    \item try DTMB increase y test 2 with wave set up in the thesis
    \item now the DTMB means the wave set up in the thesis
    \item wave test set up is "wavetest"
\end{enumerate}
\section{10th July}
\subsection{Work for DTMB5415}
\begin{enumerate}
    \item test Gabin's file
    \item check the calculation from the Vaibhav thesis
    \item use the given definition file to run the simulation
\end{enumerate}
\section{15th July}
\subsection{Work for DTMB5415}
\begin{enumerate}
    \item back to work on sockeye
    \item moving with given def file test1 with reduced y domain and wave test conditions
    \item --> failed --> need to find the issue --> failed 
\end{enumerate}
\section{16th July}
\subsection{Work for DTMB5415}
\begin{enumerate}
    \item use the matchmeshvelocity in my definition file       
    \item still internal error  
\end{enumerate}
\section{18th July}
\subsection{Work for DTMB5415}
\begin{enumerate}
    \item after ask Xiaoyu
    \item within DTMB-M-reducey
    \item Test1 make all non linear iteration to be 1 and see what is wrong here (time step =10) --> 10 steps sucessd --> run for longer time (test1-1) --> failed after 73 steps (chaos)
    probably wrong with the inlet velocity
    \item Test2 make it not moving again to see what is wrong in the given (rigid.def) definition file (/DTMB5415-NM-reduce-y-Test3)
    \item remove the initial inlet velocity --> DTMB-moving-reducey-test2 (1501309) --> make 4000 steps and 80 out Fre - DTMB-moving-reducey-Test3 (1501430)
    \item xiaoyu suggested to test the not moving case with just a current not a wave and then turn it into a wave so see if the problem is in the ALE, boundary conditions, or the domain itself.
    \item add the inlet velocity and fix the ale ship Z motion --> DTMB-moving-reducey-test4
\end{enumerate}
\section{19th July}
\subsection{Work for DTMB5415}
\begin{enumerate}
    \item re-build simflow-DTMB
\end{enumerate}
\section{22th July}
\subsection{Work for DTMB5415}
\begin{enumerate}
    \item inspired by Ishan, no inlet velocity, hydrostaticoutflow to be off, tune a outflow velocity, with the damping off as well, with DTMB wave condition--> DTMB-moving-reducey-test5(1526607)
    \item test5 succeed without error, but the water is too deep and is draining out since the outlet velocity is too high (?), so reduce the water depth and out velocity to be 1.0 -->Test6
    \item 1.0 outflow velocity is still too fast --? reduce to 0.5 --> test7 --
    \item 
\end{enumerate}
\end{document}